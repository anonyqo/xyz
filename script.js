const meals = [
	{
		name: "Spaghetti Bolognese",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/spaghetti-bolognese",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/spaghetti-bolognese",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/spaghetti-bolognese",
			},
		],
	},
	{
		name: "Kotlet schabowy",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/kotlet-schabowy",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/kotlet-schabowy",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/kotlet-schabowy",
			},
		],
	},
	{
		name: "Pierogi ruskie",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/pierogi-ruskie",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/pierogi-ruskie",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/pierogi-ruskie",
			},
		],
	},
	{
		name: "Rosół",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/rosol",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/rosol",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/rosol",
			},
		],
	},
	{
		name: "Placki ziemniaczane",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/placki-ziemniaczane",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/placki-ziemniaczane",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/placki-ziemniaczane",
			},
		],
	},
	{
		name: "Gołąbki",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/golabki",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/golabki",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/golabki",
			},
		],
	},
	{
		name: "Bigos",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/bigos",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/bigos",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/bigos",
			},
		],
	},
	{
		name: "Żurek",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/zurek",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/zurek",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/zurek",
			},
		],
	},
	{
		name: "Fasolka po bretońsku",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/fasolka-po-bretonsku",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/fasolka-po-bretonsku",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/fasolka-po-bretonsku",
			},
		],
	},
	{
		name: "Jajecznica",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/jajecznica",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/jajecznica",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/jajecznica",
			},
		],
	},
	{
		name: "Naleśniki",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/nalesniki",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/nalesniki",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/nalesniki",
			},
		],
	},
	{
		name: "Leczo",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/leczo",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/leczo",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/leczo",
			},
		],
	},
	{
		name: "Mizeria",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/mizeria",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/mizeria",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/mizeria",
			},
		],
	},
	{
		name: "Krupnik",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/krupnik",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/krupnik",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/krupnik",
			},
		],
	},
	{
		name: "Kopytka",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/kopytka",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/kopytka",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/kopytka",
			},
		],
	},
	{
		name: "Risotto",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/risotto",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/risotto",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/risotto",
			},
		],
	},
	{
		name: "Lasagne",
		category: "drogi",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/lasagne",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/lasagne",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/lasagne",
			},
		],
	},
	{
		name: "Kurczak curry",
		category: "tani",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/kurczak-curry",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/kurczak-curry",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/kurczak-curry",
			},
		],
	},
	{
		name: "Makaron carbonara",
		category: "drogi",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/makaron-carbonara",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/makaron-carbonara",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/makaron-carbonara",
			},
		],
	},
	{
		name: "Gulasz wołowy",
		category: "drogi",
		links: [
			{
				name: "Przepisy.pl",
				url: "https://www.przepisy.pl/przepis/gulasz-wolowy",
			},
			{
				name: "Ania Gotuje",
				url: "https://aniagotuje.pl/przepis/gulasz-wolowy",
			},
			{
				name: "PoProstuPycha",
				url: "https://poprostupycha.com.pl/przepis/gulasz-wolowy",
			},
		],
	},
];

const mealElement = document.getElementById("meal");
const cheapButton = document.getElementById("cheap");
const expensiveButton = document.getElementById("expensive");
const linksElement = document.getElementById("links");

let currentMeals = [...meals];
let availableMeals = [...currentMeals];

function getRandomMeal() {
	if (availableMeals.length === 0) {
		// Jeśli wszystkie dania zostały wylosowane, resetujemy listę
		availableMeals = [...currentMeals];
	}

	const randomIndex = Math.floor(Math.random() * availableMeals.length);
	const meal = availableMeals[randomIndex];

	// Usuwamy wylosowane danie z listy dostępnych
	availableMeals.splice(randomIndex, 1);

	return meal;
}

function updateMeal() {
	const meal = getRandomMeal();
	if (meal) {
		mealElement.textContent = meal.name;
		updateLinks(meal);
	}
}

function updateLinks(meal) {
	linksElement.innerHTML = meal.links
		.map(link => `<a href="${link.url}" target="_blank">${link.name}</a>`)
		.join("");
}

mealElement.addEventListener("click", updateMeal);

cheapButton.addEventListener("click", () => {
	cheapButton.classList.toggle("active");
	expensiveButton.classList.remove("active");
	filterMeals();
});

expensiveButton.addEventListener("click", () => {
	expensiveButton.classList.toggle("active");
	cheapButton.classList.remove("active");
	filterMeals();
});

function filterMeals() {
	const cheapActive = cheapButton.classList.contains("active");
	const expensiveActive = expensiveButton.classList.contains("active");

	if (cheapActive) {
		currentMeals = meals.filter(meal => meal.category === "tani");
	} else if (expensiveActive) {
		currentMeals = meals.filter(meal => meal.category === "drogi");
	} else {
		currentMeals = [...meals];
	}

	// Resetujemy listę dostępnych dań po zmianie filtrów
	availableMeals = [...currentMeals];

	// Aktualizujemy wyświetlane danie
	updateMeal();
}

function addMeal(name, category, links) {
	meals.push({ name, category, links });
	currentMeals = [...meals];
	availableMeals = [...currentMeals];
	updateMeal();
}

function updateMealLinks(mealName, newLinks) {
	const mealIndex = meals.findIndex(meal => meal.name === mealName);
	if (mealIndex !== -1) {
		meals[mealIndex].links = newLinks;
		currentMeals = [...meals];
		availableMeals = [...currentMeals];
		updateMeal();
	}
}

updateMeal();
